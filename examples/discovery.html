<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta charset="utf-8" />
</head>
<body>
<script type="text/javascript" src="/dist/index.js"></script>
<script type="module">
"use strict";

const optimadeClient = new optimade.Optimade({providersUrl: 'https://providers.optimade.org/providers.json', corsProxyUrl: 'https://cors.optimade.science'});

console.warn('Starting discovery...');

optimadeClient.getProviders().then(async data => {

    let providers = Object.keys(optimadeClient.providers),
        apis = [];
    console.log('Providers found: ' + providers.length);
    providers.sort();
    console.log('Providers: ' + providers.join(', '));
    //console.dir(optimadeClient.providers, {depth: null});

    for (const api in optimadeClient.apis){
        if (optimadeClient.apis[api].length) apis.push(api);
    }
    console.log('APIs found: ' + apis.length);
    apis.sort();
    console.log('APIs: ' + apis.join(', '));
    //console.dir(optimadeClient.apis, {depth: null});

}).catch(console.error);
</script>
</body>
</html>